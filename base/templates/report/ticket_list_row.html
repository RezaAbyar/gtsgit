{% extends 'base.html' %}
{% load static %}

{% block title %}cÚ¯Ø²Ø§Ø±Ø´ ØªÛŒÚ©Øª Ù‡Ø§{% endblock %}
{% block context %}
   {% include 'message.html' %}

    <title>Ú¯Ø²Ø§Ø±Ø´ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ Ø¨Ù‡ ØªÙÚ©ÛŒÚ© Ù…Ù†Ø·Ù‚Ù‡ Ùˆ Ù…Ø§Ù‡ </title>
    <style>
        body {

            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .filter-form {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .filter-form label {
            font-weight: bold;
            margin-left: 15px;
        }
        .filter-form input, .filter-form select {
            padding: 8px 12px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            margin-left: 10px;
        }
        .filter-form button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 15px;
        }
        .filter-form button:hover {
            background-color: #2980b9;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px 8px;
            text-align: center;
        }
        th {
            background-color: #34495e;
            color: white;
            font-weight: bold;
            position: sticky;
            top: 0;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        tr:hover {
            background-color: #e8f4f8;
        }
        .zone-name {
            background-color: #2c3e50;
            color: white;
            font-weight: bold;
            text-align: right;
            padding-right: 15px;
        }
        .positive {
            color: #27ae60;
            font-weight: bold;
        }
        .negative {
            color: #e74c3c;
            font-weight: bold;
        }
        .month-header {
            background-color: #3498db;
            color: white;
        }
        .total-row {
            background-color: #ecf0f1;
            font-weight: bold;
        }
        .comparison-header {
            background-color: #9b59b6;
            color: white;
        }
        .no-data {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
            padding: 40px;
        }
    </style>


        <h1>ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ Ø¨Ù‡ ØªÙÚ©ÛŒÚ© Ù…Ù†Ø·Ù‚Ù‡ Ùˆ Ù…Ø§Ù‡ <span>

            {% if status  == 0  %}
        (Ù‡Ù…Ù‡ ØªÛŒÚ©Øª Ù‡Ø§)
          {% elif status  == 1  %}
                (Ú©Ø§Ø±ØªØ®ÙˆØ§Ù† Ùˆ ØµÙØ­Ù‡ Ú©Ù„ÛŒØ¯)
                {% elif status  == 2  %}
             (   Ú©Ø§Ø±ØªØ®ÙˆØ§Ù†)
                {% elif status  == 3  %}
               ( ØµÙØ­Ù‡ Ú©Ù„ÛŒØ¯)
            {% endif %}
        </span>

        </h1>
{% if mgr == 1 %}
        <div class="filter-form">
            <form method="POST">
                {% csrf_token %}

                <label for="year">ğŸ“… Ø³Ø§Ù„:</label>
                <input type="number" id="year" name="year" value="{{ year|default:1404 }}" required min="1400" max="1500">

                <label for="status">ğŸ” Ù†ÙˆØ¹ Ù‚Ø·Ø¹Ù‡:</label>
                <select id="status" name="status">
                    <option {% if status == 0 or status == "0"  %}selected {% endif %} value="0" >Ù‡Ù…Ù‡ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§</option>
                    <option {% if status == 1  %}selected {% endif %} value="1">ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±ØªØ®ÙˆØ§Ù† Ùˆ ØµÙØ­Ù‡ Ú©Ù„ÛŒØ¯</option>
                    <option {% if status == 2  %}selected {% endif %} value="2">ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±ØªØ®ÙˆØ§Ù†</option>
                    <option {% if status == 3  %}selected {% endif %} value="3">ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ÛŒ ØµÙØ­Ù‡ Ú©Ù„ÛŒØ¯</option>
                </select>

                <button type="submit">ğŸ” Ù†Ù…Ø§ÛŒØ´ Ú¯Ø²Ø§Ø±Ø´</button>
            </form>
        </div>
{% endif %}
        {% if zones_list %}
            <h2>ğŸ“ˆ Ú¯Ø²Ø§Ø±Ø´ Ø³Ø§Ù„ {{ year }} Ø¯Ø± Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Ø³Ø§Ù„ {{ previous_year }}</h2>

            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                                 {% if mgr == 1 %}
               <th rowspan="2">Ù…Ù†Ø·Ù‚Ù‡</th>
                    {% elif mgr == 2 %}
                            <th rowspan="2">Ø¬Ø§ÛŒÚ¯Ø§Ù‡</th>
                                     {% endif %}
                            <th colspan="12" class="month-header">ØªØ¹Ø¯Ø§Ø¯ ØªÛŒÚ©Øª - Ø³Ø§Ù„ {{ year }}</th>
                            <th colspan="12" class="comparison-header">ØªØºÛŒÛŒØ±Ø§Øª Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø³Ø§Ù„ Ù‚Ø¨Ù„</th>
                            <th rowspan="2">Ù…Ø¬Ù…ÙˆØ¹ {{ year }}</th>
                            <th rowspan="2">Ù…Ø¬Ù…ÙˆØ¹ {{ previous_year }}</th>

                        </tr>
                        <tr>
                            <!-- Ù…Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ù„ Ø¬Ø§Ø±ÛŒ -->


                                <th class="month-header">ÙØ±ÙˆØ±Ø¯ÛŒÙ†</th>
                                <th class="month-header">Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª</th>
                                <th class="month-header">Ø®Ø±Ø¯Ø§Ø¯</th>
                                <th class="month-header">ØªÛŒØ±</th>
                                <th class="month-header">Ù…Ø±Ø¯Ø§Ø¯</th>
                                <th class="month-header">Ø´Ù‡Ø±ÛŒÙˆØ±</th>
                                <th class="month-header">Ù…Ù‡Ø±</th>
                                <th class="month-header">Ø¢Ø¨Ø§Ù†</th>
                                <th class="month-header">Ø¢Ø°Ø±</th>
                                <th class="month-header">Ø¯ÛŒ</th>
                                <th class="month-header">Ø¨Ù‡Ù…Ù†</th>
                                <th class="month-header">Ø§Ø³ÙÙ†Ø¯</th>


                            <!-- ØªØºÛŒÛŒØ±Ø§Øª Ù…Ø§Ù‡Ø§Ù†Ù‡ -->

                                  <th class="comparison-header">ÙØ±ÙˆØ±Ø¯ÛŒÙ†</th>
                                <th class="comparison-header">Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª</th>
                                <th class="comparison-header">Ø®Ø±Ø¯Ø§Ø¯</th>
                                <th class="comparison-header">ØªÛŒØ±</th>
                                <th class="comparison-header">Ù…Ø±Ø¯Ø§Ø¯</th>
                                <th class="comparison-header">Ø´Ù‡Ø±ÛŒÙˆØ±</th>
                                <th class="comparison-header">Ù…Ù‡Ø±</th>
                                <th class="comparison-header">Ø¢Ø¨Ø§Ù†</th>
                                <th class="comparison-header">Ø¢Ø°Ø±</th>
                                <th class="comparison-header">Ø¯ÛŒ</th>
                                <th class="comparison-header">Ø¨Ù‡Ù…Ù†</th>
                                <th class="comparison-header">Ø§Ø³ÙÙ†Ø¯</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for zone in zones_list %}
                            <tr>
                            {% if mgr == 1 %}
                                <td  class="zone-name"><a style="color: #feffff" href="{% url 'base:ticket_list_row_zone' zone.zone_id newyear status %}"> {{ zone.name }}</a></td>
                            {% elif mgr == 2 %}
                                <td class="zone-name">{{ zone.zone_id }} - {{ zone.name }}</td>
                                {% endif %}
                                <!-- ØªØ¹Ø¯Ø§Ø¯ ØªÛŒÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ù„ Ø¬Ø§Ø±ÛŒ -->
                            <td>{{ zone.current01 }}</td>
                            <td>{{ zone.current02 }}</td>
                            <td>{{ zone.current03 }}</td>
                            <td>{{ zone.current04 }}</td>
                            <td>{{ zone.current05 }}</td>
                            <td>{{ zone.current06 }}</td>
                            <td>{{ zone.current07 }}</td>
                            <td>{{ zone.current08 }}</td>
                            <td>{{ zone.current09 }}</td>
                            <td>{{ zone.current10 }}</td>
                            <td>{{ zone.current11 }}</td>
                            <td>{{ zone.current12 }}</td>

                                <!-- ØªØºÛŒÛŒØ±Ø§Øª Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø³Ø§Ù„ Ù‚Ø¨Ù„ -->
                            <td>{{ zone.previous01 }}</td>
                            <td>{{ zone.previous02 }}</td>
                            <td>{{ zone.previous03 }}</td>
                            <td>{{ zone.previous04 }}</td>
                            <td>{{ zone.previous05 }}</td>
                            <td>{{ zone.previous06 }}</td>
                            <td>{{ zone.previous07 }}</td>
                            <td>{{ zone.previous08 }}</td>
                            <td>{{ zone.previous09 }}</td>
                            <td>{{ zone.previous10 }}</td>
                            <td>{{ zone.previous11 }}</td>
                            <td>{{ zone.previous12 }}</td>

                                <!-- Ù…Ø¬Ù…ÙˆØ¹ Ùˆ ØªØºÛŒÛŒØ± Ú©Ù„ -->
                                <td class="total-row">{{ zone.currentsum }}</td>
                                <td class="total-row">{{ zone.previoussum }}</td>

                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 20px; padding: 15px; background-color: #e8f6f3; border-radius: 5px;">
                <h3>ğŸ“‹ Ø®Ù„Ø§ØµÙ‡ Ú¯Ø²Ø§Ø±Ø´:</h3>
                {% if mgr == 1 %}
                <p>â€¢ ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ù…Ù†Ø§Ø·Ù‚: <strong>{{ zones_list|length }}</strong></p>
                    {% elif mgr == 2 %}
                    <p>â€¢ ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø¬Ø§ÛŒÚ¯Ø§Ù‡: <strong>{{ zones_list|length }}</strong></p>
                    {% endif %}
                <p>â€¢ Ø³Ø§Ù„ Ù…ÙˆØ±Ø¯ Ø¨Ø±Ø±Ø³ÛŒ: <strong>{{ year }}</strong></p>
                <p>â€¢ Ø³Ø§Ù„ Ù…Ù‚Ø§ÛŒØ³Ù‡: <strong>{{ previous_year }}</strong></p>
            </div>

        {% else %}
            {% if year %}
                <div class="no-data">
                    <h3>ğŸ“­ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</h3>
                    <p>Ù‡ÛŒÚ† ØªÛŒÚ©ØªÛŒ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ù„ {{ year }} Ø¨Ø§ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯.</p>
                </div>
            {% else %}
                <div class="no-data">
                    <h3>ğŸ‘† Ù„Ø·ÙØ§Ù‹ Ø³Ø§Ù„ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h3>
                    <p>Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´ØŒ Ø³Ø§Ù„ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ùˆ ÙØ±Ù… Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯.</p>
                </div>
            {% endif %}
        {% endif %}
    </div>

{% endblock %}